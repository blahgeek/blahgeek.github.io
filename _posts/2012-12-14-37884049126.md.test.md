---
permalink: diu-qi-rstbao-fan-gfwfeng-suo.html
layout: post
title: 丢弃RST包反GFW封锁
tags: reset iptables GFW VPN
---

>大防火墙已经能够根据VPN的流量特征来封锁指定端口了，更换端口也不是个办法，只能在client端和server端配置iptables丢弃RST包了。鉴于IDS系统和router一般是分开的，因此正常数据包只是晚于RST包到达而已，并不会被大防火墙丢弃。

server：

```
iptables -A INPUT -p tcp -m tcp --dport <PORT> --tcp-flags RST RST -j DROP 

```
client：

```
iptables -A INPUT -p tcp -s <SERVER IP> --sport <PORT> --tcp-flags RST RST -j DROP

```
PS：iptables是从上往下匹配规则的，匹配到一条就不再往下了，因此直接放到最前面就好。

